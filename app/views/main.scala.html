@(title: String)(content: Html)(implicit request: RequestHeader, user: User)

<!DOCTYPE html>
<html>
    <head>
        <title>@title</title>
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/bootstrap.min.css")">
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/bootstrap-responsive.min.css")">
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/font-awesome.min.css")">
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/main.css")">

        <link rel="shortcut icon" type="image/png" href="@routes.Assets.at("images/favicon.png")">

        <script src="@routes.Assets.at("javascripts/jquery-1.9.0.min.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("javascripts/bootstrap.min.js")" type="text/javascript"></script>
    </head>
    <body>

        <div class="headerBar">
            <div class="container">

                <div class="pull-left">
                    <a href="@routes.Application.home()"><div class="logo"></div></a>
                </div>

                <div class="links pull-right">
                    <div class="link">
                        <a href="@routes.Application.home()">
                            <i class="icon-home"></i> Home
                        </a>
                    </div>

                    @if(user.role != User.roles.guest) {
                        <div class="link">
                            <a href="@routes.ContentController.mine()">
                                <i class="icon-folder-open"></i> My Content
                            </a>
                        </div>

                        <div class="link">
                            <a href="#" id="profileLink">
                                <i class="icon-user"></i> Profile
                            </a>
                            <div id="profileDropdown">
                                <div class="dropdownPoint"></div>
                                <div class="dropdownItem">
                                    <a href="@routes.Users.accountSettings()"><i class="icon-cog"></i> Account Settings</a>
                                </div>
                                <div class="dropdownItem">
                                    <a href="@routes.Users.notifications()"><i class="icon-inbox"></i> Notifications
                                        @defining(user.getNotifications.filterNot(_.messageRead)) { notifications =>
                                            @if(!notifications.isEmpty) {
                                                <span class="badge badge-yellow pad-left-low">@notifications.size</span>
                                            }
                                        }
                                    </a>
                                </div>
                                @if(user.role == User.roles.admin) {
                                    <div class="dropdownItem">
                                        <a href="@routes.Users.admin()"><i class="icon-wrench"></i> Admin Dashboard</a>
                                    </div>
                                }
                                <div class="dropdownItem">
                                    <a href="@controllers.authentication.routes.Authentication.logout()"><i class="icon-off"></i> Log out</a>
                                </div>
                            </div>
                        </div>

                        <div class="link">
                            <i class="icon-search"></i>
                            <input type="text" class="searchBox" />
                        </div>
                    }
                </div>
            </div>
        </div>

        <div class="container">
            <div class="mainContent">
                @content

                <div class="messageContainer">
                    <!-- Messages/alerts -->
                    @if(request.flash.get("alert").isDefined) {
                        <div class="alert">
                            <a class="close" data-dismiss="alert">×</a>
                            <strong>Just a sec...</strong> @request.flash("alert")
                        </div>
                    }
                    @if(request.flash.get("error").isDefined) {
                        <div class="alert alert-error">
                            <a class="close" data-dismiss="alert">×</a>
                            <strong>Oh snap!</strong> @request.flash("error")
                        </div>
                    }
                    @if(request.flash.get("success").isDefined) {
                        <div class="alert alert-success">
                            <a class="close" data-dismiss="alert">×</a>
                            <strong>Alright!</strong> @request.flash("success")
                        </div>
                    }
                    @if(request.flash.get("info").isDefined) {
                        <div class="alert alert-info">
                            <a class="close" data-dismiss="alert">×</a>
                            <strong>Heads up.</strong> @request.flash("info")
                        </div>
                    }
                </div>

                <div class="footer">
                    <div class="padded">
                        <div class="row-fluid">
                            <div class="span10 offset1">
                                <div class="row-fluid">
                                    <div class="span3">
                                        @if(user.role != User.roles.guest) {
                                            <div><a href="@routes.Courses.list()">Course Directory</a></div>
                                        }
                                        <div><a href="@routes.ContentController.public()">Public Content Listing</a></div>
                                        <div><a href="#">About Ayamel</a></div>
                                    </div>
                                    <div class="span3">
                                        <div><a href="#">Terms of Use</a></div>
                                        <div><a href="#">Privacy Policy</a></div>
                                    </div>
                                    <div class="span3">
                                        <div>Copyright © 2013 Brigham Young University</div>
                                        <div>By the <a href="http://arclite.byu.edu">ARCLITE Lab</a></div>
                                        <div><a href="http://byu.edu">BYU Home</a></div>
                                    </div>
                                    <div class="span3">
                                        <div>All source code is <a href="https://github.com/BYU-ARCLITE">Open Source</a></div>
                                        <div>Uses the <a href="http://ayamel.americancouncils.org/">Ayamel Resource Library</a></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script type="text/javascript">
            $(function() {

                var $profileDropdown = $("#profileDropdown").hide();

                $("#profileLink").click(function() {
                    $profileDropdown.toggle();
                    event.stopPropagation();
                    return false;
                });
                $("body").click(function() {
                    $profileDropdown.hide();
                });
                $profileDropdown.click(function(event) {
                    event.stopPropagation();
                });

            });
        </script>

    </body>
</html>
