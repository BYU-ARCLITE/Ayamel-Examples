@(content: models.Content, course: Option[Course], resourceLibraryUrl: String)(implicit request: RequestHeader, user: User)

@editor("Ayamel - CaptionAider",
  Extern("TimelineEditor", CSS("timeline.css")),
  Local(
    CSS("stylesheets/timeline.css"),
    JS("javascripts/pageScripts/captionAider.js"))
) {

    @views.html.content.header.includes()

    @Dependencies(
	  Extern("TimelineEditor",
        JS("Timeline.js"),
        JS("Slider.js"),
        JS("TimelineSkin.js"),
        JS("TimelineView.js"),
        JS("TextTrack.js"),
        JS("TimelineMenus.js"),
        JS("CaptionEditor.js"),
        JS("WaveForm.js"),
        JS("Resampler.js"),
        JS("AudioTrack.js"),
		Rel("aurora/",
		  JS("aurora.js"),
          JS("aac.js"),
          JS("alac.js"),
          JS("flac.js"),
          JS("mp3.js")))
    )

    <div class="container">
        <div class="mainContent">
            <div class="padded">
                <ul class="breadcrumb">
                    @if(course.isDefined) {
                        <li><a href="@routes.Courses.view(course.get.id.get)">@course.get.name</a> <span class="divider">/</span></li>
                        <li><a href="@routes.CourseContent.viewInCourse(content.id.get, course.get.id.get)">@content.name</a> <span class="divider">/</span></li>
                    } else {
                        <li><a href="@routes.ContentController.view(content.id.get)">@content.name</a> <span class="divider">/</span></li>
                    }
                    <li class="active">CaptionAider</li>
                </ul>
                <div id="contentHolder" class="@content.contentType.name"></div>
                <div id="bottomSpacer"></div>
            </div>
        </div>
    </div>

    <div id="bottomContainer">
        <div id="toolbarHolder">
            <div class="toolbar">
                <strong>Actions:</strong>
                <div class="btn-group">
                    <button class="btn btn-small btn-inverse" id="undoButton" title="Undo"><i class="icon-undo"></i></button>
                    <button class="btn btn-small btn-inverse" id="redoButton" title="Redo"><i class="icon-repeat"></i></button>
                </div>
            </div>

            <div class="toolbar">
                <strong>Tracks:</strong>
                <div class="btn-group">
                    <button class="btn btn-small btn-inverse" id="newTrackButton" title="Create a new track" data-target="#newTrackModal" data-toggle="modal"><i class="icon-file"></i></button>
                    <button class="btn btn-small btn-inverse" title="Edit track metadata" data-target="#editTrackModal" data-toggle="modal"><i class="icon-pencil"></i></button>
                    <button class="btn btn-small btn-inverse" title="Save tracks" data-target="#saveTrackModal" data-toggle="modal"><i class="icon-save"></i></button>
                    <button class="btn btn-small btn-inverse" title="Load tracks" data-target="#loadTrackModal" data-toggle="modal"><i class="icon-folder-open"></i></button>
                </div>
            </div>

            <div class="toolbar">
                <strong>Tools:</strong>
                <div class="btn-group" data-toggle="buttons-radio">
                    <button class="btn btn-small btn-inverse active" id="selectToolButton" title="Select Tool"><i class="icon-ok"></i></button>
                    <button class="btn btn-small btn-inverse" id="addCueToolButton" title="Add Cue Tool"><i class="icon-plus"></i></button>
                    <button class="btn btn-small btn-inverse" id="moveToolButton" title="Move Tool"><i class="icon-move"></i></button>
                    <button class="btn btn-small btn-inverse" id="splitToolButton" title="Split Tool"><i class="icon-cut"></i></button>
                    <button class="btn btn-small btn-inverse" id="deleteToolButton" title="Delete Tool"><i class="icon-trash"></i></button>
                    <button class="btn btn-small btn-inverse" id="scrollToolButton" title="Scroll Tool"><i class="icon-ellipsis-horizontal"></i></button>
                    <button class="btn btn-small btn-inverse" id="reorderToolButton" title="Reorder Tool"><i class="icon-reorder"></i></button>
                    <button class="btn btn-small btn-inverse" id="timeShiftToolButton" title="Time Shift Tool"><i class="icon-resize-horizontal"></i></button>
                    <button class="btn btn-small btn-inverse" id="repeatToolButton" title="Set Repeat Tool"><i class="icon-repeat"></i></button>
                </div>
                <div class="btn-group">
                    <button class="btn btn-small btn-inverse disabled" id="enableRepeatButton" title="Enable Repeat" data-toggle="button"><i id="repeatIcon" class="icon-circle-blank"></i></button>
                    <button class="btn btn-small btn-inverse disabled" id="clearRepeatButton" title="Clear Repeat"><i class="icon-ban-circle"></i></button>
                </div>
                <button class="btn btn-small btn-inverse" id="moveAfterAddButton" title="Move After Add" data-toggle="button">
                    <i class="icon-plus"></i>
                    <i class="icon-angle-right"></i>
                    <i class="icon-move"></i>
                </button>
            </div>

            <div id="timestamp">0:00:00</div>
        </div>

        <div id="timeline"></div>
    </div>

    <div id="newTrackModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="newTrackModalLabel" aria-hidden="true"></div>
    <div id="editTrackModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="editTrackModalLabel" aria-hidden="true"></div>
    <div id="saveTrackModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="saveTrackModalLabel" aria-hidden="true"></div>
    <div id="loadTrackModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="loadTrackModalLabel" aria-hidden="true"></div>

    <script type="text/javascript">
        var content = @Html(content.toJson.toString());
        var courseId = @course.map(_.id.get).getOrElse(0);
        var userId = @user.id.get;
        var owner = @content.isEditableBy(user);
        var teacher = @course.exists(c => user.canEdit(c));
        ResourceLibrary.setBaseUrl("@resourceLibraryUrl");
    </script>

}

