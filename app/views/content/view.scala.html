@(content: models.Content, resourceLibraryUrl: String, course: Option[Course] = None)(implicit request: RequestHeader, user: User)

@contentIcons = @{
    Map(
        'video -> "icon-film",
        'audio -> "icon-volume-up",
        'image -> "icon-picture",
        'text -> "icon-file",
        'playlist -> "icon-list-ol",
        'activity -> "icon-pencil"
    )
}

@moreStyles =  @{
    List(
      ("screen", "stylesheets/content.css"),
      ("screen", "stylesheets/annotations.css")
    )
}

@main("Ayamel - " + content.name, moreStyles) {

    <!-- Include the Ayamel css files -->
    <link href="@routes.Assets.at("Ayamel.js/css/stage.css")" media="screen" rel="stylesheet" type="text/css" />
    <link href="@routes.Assets.at("Ayamel.js/css/controlBar.css")" media="screen" rel="stylesheet" type="text/css" />

    <!-- Ayamel scripts -->
    <script src="@routes.Assets.at("Ayamel.js/js/async.js")" type="text/javascript"></script>
    <script src="@routes.Assets.at("Ayamel.js/js/annotator.js")" type="text/javascript"></script>
    <script src="@routes.Assets.at("Ayamel.js/js/Ayamel.js")" type="text/javascript"></script>
    <script src="@routes.Assets.at("Ayamel.js/js/ControlBar.js")" type="text/javascript"></script>
    <script src="@routes.Assets.at("Ayamel.js/js/ControlBarComponents.js")" type="text/javascript"></script>
    <script src="@routes.Assets.at("Ayamel.js/js/MediaController.js")" type="text/javascript"></script>
    <script src="@routes.Assets.at("Ayamel.js/js/ProgressBar.js")" type="text/javascript"></script>
    <script src="@routes.Assets.at("Ayamel.js/js/Resource.js")" type="text/javascript"></script>
    <script src="@routes.Assets.at("Ayamel.js/js/TimedMedia.js")" type="text/javascript"></script>
    <script src="@routes.Assets.at("Ayamel.js/js/UniformAspectRatio.js")" type="text/javascript"></script>
    <script src="@routes.Assets.at("Ayamel.js/js/video.js")" type="text/javascript"></script>
    <script src="@routes.Assets.at("Ayamel.js/js/VideoPlayer.js")" type="text/javascript"></script>

    <!-- Ayamel video wrappers -->
    <script src="@routes.Assets.at("Ayamel.js/js/wrappers/h5Clip.js")" type="text/javascript"></script>

    <!-- Caption rendering and timed text -->
    <script type="text/javascript" src="@routes.Assets.at("Caption-Renderer/caption-renderer.js")"></script>
    <script type="text/javascript" src="@routes.Assets.at("TimedText/TimedText.js")"></script>
    <script type="text/javascript" src="@routes.Assets.at("TimedText/TextTrack.js")"></script>
    <script type="text/javascript" src="@routes.Assets.at("TimedText/TextTrackCue.js")"></script>
    <script type="text/javascript" src="@routes.Assets.at("TimedText/WebVTT.js")"></script>

    <!-- Translation Engines -->
    <script type="text/javascript" src="@routes.Assets.at("javascripts/Translate.js/TranslationEngine.js")"></script>
    <script type="text/javascript" src="@routes.Assets.at("javascripts/Translate.js/TextTranslator.js")"></script>
    <script type="text/javascript" src="@routes.Assets.at("javascripts/Translate.js/ArcliteTranslationEngine.js")"></script>
    <script type="text/javascript" src="@routes.Assets.at("javascripts/Translate.js/GoogleTranslationEngine.js")"></script>
    <script type="text/javascript" src="@routes.Assets.at("javascripts/Translate.js/WordReferenceTranslationEngine.js")"></script>

    <!-- Annotations -->
    <script type="text/javascript" src="@routes.Assets.at("javascripts/old/SimpleAnnotator.js")"></script>
    <script type="text/javascript" src="@routes.Assets.at("javascripts/AnnotationRenderers.js")"></script>


    <!-- Content rendering -->
    <script type="text/javascript" src="@routes.Assets.at("javascripts/mustache.js")"></script>
    <script type="text/javascript" src="@routes.Assets.at("javascripts/BoxDrawingCanvas.js")"></script>

    <script type="text/javascript" src="@routes.Assets.at("javascripts/contentRendering/ContentLayoutManager.js")"></script>
    <script type="text/javascript" src="@routes.Assets.at("javascripts/contentRendering/ContentRenderer.js")"></script>
    <script type="text/javascript" src="@routes.Assets.at("javascripts/contentRendering/TranscriptDisplay.js")"></script>
    <script type="text/javascript" src="@routes.Assets.at("javascripts/contentRendering/ImageRenderer.js")"></script>
    <script type="text/javascript" src="@routes.Assets.at("javascripts/contentRendering/VideoRenderer.js")"></script>

    <script type="text/javascript" src="@routes.Assets.at("javascripts/annotating/ImageAnnotation.js")"></script>
    <script type="text/javascript" src="@routes.Assets.at("javascripts/annotating/TextAnnotation.js")"></script>
    <script type="text/javascript" src="@routes.Assets.at("javascripts/annotating/AnnotationManifest.js")"></script>
    <script type="text/javascript" src="@routes.Assets.at("javascripts/annotating/ImageAnnotator.js")"></script>
    <script type="text/javascript" src="@routes.Assets.at("javascripts/annotating/TextAnnotator.js")"></script>
    <script type="text/javascript" src="@routes.Assets.at("javascripts/annotating/AnnotationLoader.js")"></script>

    @*<script type="text/javascript" src="@routes.Assets.at("javascripts/PlaylistRenderer.js")"></script>*@

    <!-- OAuth and Cryptography -->
    <script type="text/javascript" src="@routes.Assets.at("javascripts/sha1.js")"></script>
    <script type="text/javascript" src="@routes.Assets.at("javascripts/oauth.js")"></script>
    <script type="text/javascript" src="@routes.Assets.at("javascripts/OAuthSigner.js")"></script>

    <script type="text/javascript" src="@routes.Assets.at("javascripts/fileFix.js")"></script>

    <div class="padded">

        @if(course.isDefined) {
            <div class="pad-bottom-med">
                <a href="@routes.Courses.view(course.get.id.get)"><i class="icon-arrow-left"></i> Back to course</a>
            </div>
        }

        <div class="well">

            @views.html.content.header.share(content)
            @views.html.content.header.addToCourse(content)
            @views.html.content.header.courseSettings(content, course, resourceLibraryUrl)
            @views.html.content.header.addRelatedDocs(content, resourceLibraryUrl)
            @views.html.content.header.edit(content, resourceLibraryUrl)
            @views.html.content.header.delete(content)

        </div>

        <h1><i class="@contentIcons(content.contentType)"></i> @content.name</h1>

        <div id="contentHolder" class="@content.contentType.name"></div>

        <script type="text/javascript">
            $(function() {

                // Set up the playlist renderer
                @*PlaylistRenderer.setInfo(*@
                    @*"@dataAccess.PlayGraph.host",*@
                    @*["@dataAccess.PlayGraph.playerKey.consumerKey", "@dataAccess.PlayGraph.playerKey.consumerSecret"]*@
                @*);*@

                // Set up the environment
                ContentRenderer.setResourceLibraryUrl("@resourceLibraryUrl");

                // Render the content
                var content = @Html(content.toJson.toString());
                var contentHolder = $("#contentHolder")[0];
                var coursePrefix = "@course.map(c => "course_" + c.id.get + ":").getOrElse("")";
                ContentRenderer.render({
                    content: content,
                    holder: contentHolder,
                    coursePrefix: coursePrefix,
                    annotate: true
                });
            });
        </script>

    </div>
}
