@(content: models.Content, resourceLibraryUrl: String)(implicit request: RequestHeader, user: User)

@contentIcons = @{
    Map(
        'video -> "icon-film",
        'audio -> "icon-volume-up",
        'image -> "icon-picture",
        'text -> "icon-file",
        'playlist -> "icon-list-ol",
        'activity -> "icon-pencil"
    )
}

@main("Ayamel - " + content.name,
  Local(
    Rel("stylesheets/",
	  CSS("content.css"),
	  CSS("annotator.css")),
	Rel("wysihtml5/",
	  CSS("bootstrap-wysihtml5.css"),
      JS("bootstrap-wysihtml5.js"),
	  JS("wysihtml5-0.3.0.js")),
	Rel("javascripts/",
	  JS("contentSelection/PopupBrowser.js"),
	  Rel("annotationEditing/",
	    JS("AnnotationPopupEditor.js"),
	    JS("AnnotationImageEditor.js"),
	    JS("AnnotationTextEditor.js"),
	    JS("annotationEditing.js"))))
) {

    @views.html.content.header.includes()

    <div class="padded">

        <h1><i class="@contentIcons(content.contentType)"></i> @content.name <small>Edit Annotations</small></h1>

        <div class="navbar">
            <div class="navbar-inner">
                <ul class="nav">
                    <li><a href="#metadataModal" data-toggle="modal"><i class="icon-pencil"></i> Edit metadata</a></li>
                </ul>
                <ul class="nav pull-right">
                    <li id="spinner"><i class="icon-spin icon-spinner icon-large pad-top-high"></i></li>
                    <li><a href="#" id="saveButton"><i class="icon-save"></i> Save</a></li>
                    <li><a href="#" id="quit"><i class="icon-signout"></i> Quit</a></li>
                </ul>
            </div>
        </div>
        <div id="annotationEditor"></div>

        <script type="text/javascript">
            var content = @Html(content.toJson.toString);
            ResourceLibrary.setBaseUrl("@resourceLibraryUrl");
        </script>

        <div id="metadataModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="metadataModalLabel" aria-hidden="true">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
                <h3 id="metadataModalLabel">Edit Metadata</h3>
            </div>
            <div class="modal-body">
                <div class="form-horizontal">
                    <div class="control-group">
                        <label class="control-label" for="title">Title</label>
                        <div class="controls">
                            <input type="text" id="title" placeholder="Title">
                        </div>
                    </div>
                    <div class="control-group">
                        <label class="control-label" for="language">Language</label>
                        <div class="controls" id="langLocation"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
                <button class="btn btn-blue" id="saveMetadataButton">Save changes</button>
            </div>
        </div>

    </div>

    <script type="text/javascript">
        $(function() {

            var langList = Object.keys(Ayamel.utils.p1map).map(function (p1) {
                    var code = Ayamel.utils.p1map[p1];
                    return {value: code, text: Ayamel.utils.getLangName(code)};
                }).sort(function(a,b){ return a.text.localeCompare(b.text); });

            langList.unshift({value:'zxx',text:'No Linguistic Content'});

            new EditorWidgets.SuperSelect({
                el: "langLocation",
                data:{
                    id: 'languages',
                    selection: 'zxx',
                    icon: 'icon-globe',
                    text: 'Select Language',
                    multiple: false,
                    options: langList
                }
            });
        });
    </script>
}
