@(content: models.Content, resourceLibraryUrl: String, embed: Boolean = false)

@contentIcons = @{
    Map(
        'video -> "icon-film",
        'audio -> "icon-volume-up",
        'image -> "icon-picture",
        'playlist -> "icon-list-ol",
        'activity -> "icon-pencil"
    )
}

<!DOCTYPE html>
<html>
    <head>
        <title>Ayamel - @content.name</title>

        @views.html.resources.stylesheets(
          List(
            ("screen", "stylesheets/bootstrap.min.css"),
            ("screen", "stylesheets/bootstrap-responsive.min.css"),
            ("screen", "stylesheets/font-awesome.min.css"),
            ("screen", "stylesheets/main.css"),
            ("screen", "stylesheets/content.css")
          )
        )

        <link rel="shortcut icon" type="image/png" href="@routes.Assets.at("images/favicon.png")">
        <script src="@routes.Assets.at("javascripts/jquery-1.9.0.min.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("javascripts/bootstrap.min.js")" type="text/javascript"></script>

        <!-- Include the Ayamel css files -->
        <link href="@routes.Assets.at("Ayamel.js/css/stage.css")" media="screen" rel="stylesheet" type="text/css" />
        <link href="@routes.Assets.at("Ayamel.js/css/controlBar.css")" media="screen" rel="stylesheet" type="text/css" />

        <!-- Ayamel scripts -->
        <script src="@routes.Assets.at("Ayamel.js/js/Ayamel.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("Ayamel.js/js/ControlBar.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("Ayamel.js/js/ControlBarComponents.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("Ayamel.js/js/MediaController.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("Ayamel.js/js/ProgressBar.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("Ayamel.js/js/Resource.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("Ayamel.js/js/TimedMedia.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("Ayamel.js/js/UniformAspectRatio.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("Ayamel.js/js/video.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("Ayamel.js/js/VideoPlayer.js")" type="text/javascript"></script>

        <!-- Ayamel video wrappers -->
        <script src="@routes.Assets.at("Ayamel.js/js/wrappers/h5Clip.js")" type="text/javascript"></script>

        <!-- Caption rendering and timed text -->
        <script type="text/javascript" src="@routes.Assets.at("Caption-Renderer/caption-renderer.js")"></script>
        <script type="text/javascript" src="@routes.Assets.at("TimedText/TimedText.js")"></script>
        <script type="text/javascript" src="@routes.Assets.at("TimedText/TextTrack.js")"></script>
        <script type="text/javascript" src="@routes.Assets.at("TimedText/TextTrackCue.js")"></script>
        <script type="text/javascript" src="@routes.Assets.at("TimedText/WebVTT.js")"></script>

        <!-- Content rendering -->
        <script type="text/javascript" src="@routes.Assets.at("javascripts/ContentRenderer.js")"></script>
    </head>
    <body class="@if(embed) { embed }">

        @if(!embed) {
            <div class="headerBar">
                <div class="container">
                    <div class="pull-left">
                        <a href="@routes.Application.index()"><div class="logo"></div></a>
                    </div>
                </div>
            </div>

            <div class="container">
                <div class="mainContent">

                    <div class="padded">

                        <h1><i class="@contentIcons(content.contentType)"></i> @content.name</h1>

                        <div id="contentHolder"></div>
                        <script type="text/javascript">
                            $(function() {
                                // Set up the environment
                                ContentRenderer.setResourceLibraryUrl("@resourceLibraryUrl");

                                // Render the content
                                var content = @Html(content.toJson.toString);
                                var contentHolder = $("#contentHolder")[0];
                                ContentRenderer.render(content, contentHolder);
                            });
                        </script>

                    </div>

                </div>
            </div>
        } else {
            <div class="embedHeader">
                <div class="pull-left">
                    <h3><i class="@contentIcons(content.contentType)"></i> @content.name</h3>
                </div>
                <div class="pull-right">
                    <a id="ayamelLink" class="pad-right-med" href="@routes.Application.index()"><img src="@routes.Assets.at("images/logo-small-light.png")"></a>
                </div>
            </div>
            <div class="embedContainer @if(content.contentType == 'audio){audio}">
                <div id="contentHolder"></div>
                <script type="text/javascript">
                    $(function() {

                        @if(content.contentType == 'playlist) {
                            var playerKey = [
                                "@dataAccess.PlayGraph.playerKey.consumerKey",
                                "@dataAccess.PlayGraph.playerKey.consumerSecret"
                            ];
                        }
                        // Set up the environment
                        ContentRenderer.setResourceLibraryUrl("@resourceLibraryUrl");

                        // Render the content
                        var content = @Html(content.toJson.toString);
                        var contentHolder = $("#contentHolder")[0];
                        ContentRenderer.render(content, contentHolder);
                    });
                </script>
            </div>
        }

        <script type="text/javascript">
            $(function() {
                $("#ayamelLink").click(function() {
                    var href = $(this).attr("href");
                    window.top.location = href;
                    return false;
                });
            });
        </script>

        <!-- Google Analytics -->
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-39697543-1', 'byu.edu');
            ga('send', 'pageview');

        </script>

    </body>
</html>