@(title: String, moreStyles: Seq[(String, String)] = Nil)(content: Html)(implicit request: RequestHeader, user: Option[User])

@import views.html.resources._

<!DOCTYPE html>
<html ng-app>
    <head>
        <title>@title</title>

        @stylesheets(
          List(
            ("screen", "stylesheets/bootstrap.min.css"),
            ("screen", "stylesheets/bootstrap-responsive.min.css"),
            ("screen", "stylesheets/font-awesome.min.css"),
            ("screen", "stylesheets/main.css")
          ) ++ moreStyles
        )

        <link rel="shortcut icon" type="image/png" href="@routes.Assets.at("images/favicon.png")">
        <script src="@routes.Assets.at("javascripts/jquery-1.9.0.min.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("javascripts/bootstrap.min.js")" type="text/javascript"></script>
        <script type="text/javascript" src="@routes.Assets.at("javascripts/mustache.js")"></script>
        <script src="@routes.Assets.at("javascripts/ContentItemRenderer.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("javascripts/ActivityStreams.js")" type="text/javascript"></script>
        <script src="@routes.Assets.at("javascripts/angular.min.js")" type="text/javascript"></script>
    </head>
    <body>

        <div class="headerBar">
            <div class="container">
                <div class="pull-left">
                    <a href="@routes.Application.home()"><div class="logo"></div></a>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="mainContent">
                @content

                <div class="footer">
                    <div class="padded">
                        <div class="row-fluid">
                            <div class="span10 offset1">
                                <div class="row-fluid">
                                    <div class="span3 offset3">
                                        <div>Copyright © 2013 <a href="http://byu.edu">Brigham Young University</a></div>
                                        <div>By the <a href="http://arclite.byu.edu">ARCLITE Lab</a></div>
                                        <div>Funding from <a href="http://www.thelanguageflagship.org/">The Language Flagship</a></div>
                                    </div>
                                    <div class="span3">
                                        <div>All source code is <a href="https://github.com/BYU-ARCLITE">Open Source</a></div>
                                        <div>Uses the <a href="http://ayamel.americancouncils.org/">Ayamel Resource Library</a></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="messageContainer">
                <!-- Messages/alerts -->
            @if(request.flash.get("alert").isDefined) {
                <div class="alert">
                    <a class="close" data-dismiss="alert">×</a>
                    <strong>Just a sec...</strong> @Html(request.flash("alert"))
                </div>
            }
            @if(request.flash.get("error").isDefined) {
                <div class="alert alert-error">
                    <a class="close" data-dismiss="alert">×</a>
                    <strong>Oh snap!</strong> @Html(request.flash("error"))
                </div>
            }
            @if(request.flash.get("success").isDefined) {
                <div class="alert alert-success">
                    <a class="close" data-dismiss="alert">×</a>
                    <strong>Alright!</strong> @Html(request.flash("success"))
                </div>
            }
            @if(request.flash.get("info").isDefined) {
                <div class="alert alert-info">
                    <a class="close" data-dismiss="alert">×</a>
                    <strong>Heads up.</strong> @Html(request.flash("info"))
                </div>
            }
        </div>

        <script type="text/javascript">
            $(function() {

                // Set up the dropdowns
                var $headerDropdowns = $(".headerDropdown").hide();

                $(".headerDropdownLink").click(function(event) {
                    $($(this).attr("data-target")).toggle();
//                    event.stopPropagation();
                    return false;
                });
                $("body").click(function() {
                    $headerDropdowns.hide();
                });
                $headerDropdowns.click(function(event) {
                    event.stopPropagation();
                });

                // Set up the search box
                $("#searchBox").keypress(function(event) {
                    var keycode = null;
                    if(window.event)
                        keycode = window.event.keyCode;
                    else
                        keycode = e.which;

                    if (keycode == 13) {
                        var query = $(this).val();
                        window.location = "/search?query=" + encodeURI(query);
                    }
                });

                setTimeout(function() {
                    $(".alert").fadeOut(500, function() {
                        $(this).remove();
                    });
                }, 5000);

            });
        </script>

        <!-- Google Analytics -->
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-39697543-1', 'byu.edu');
            ga('send', 'pageview');

        </script>

        @views.html.feedback()

    </body>
</html>
